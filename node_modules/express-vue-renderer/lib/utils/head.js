'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

// vue: {
//     head: {
//         title: 'Page Title',
//         meta: [
//             { property:'og:title', content: 'Page Title'},
//             { name:'twitter:title', content: 'Page Title'},
//         ]
//     }
// }
var HeadUtil = function () {
    function HeadUtil(vueObject, styleString) {
        _classCallCheck(this, HeadUtil);

        this.setupStyleString(styleString);
        this.setupMetaTags(vueObject);
        this.setupTitle(vueObject);
        this.setupStructuredData(vueObject);
    }

    _createClass(HeadUtil, [{
        key: 'setupMetaTags',
        value: function setupMetaTags(vueObject) {
            if (this.metaTags === undefined) {
                this.metaTags = '';
            }
            if (vueObject.head && vueObject.head.meta) {
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = vueObject.head.meta[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var metaItem = _step.value;

                        if (metaItem.name) {
                            this.metaTags += '<meta name="' + metaItem.name + '" content="' + metaItem.content + '"/>\n';
                        } else if (metaItem.property) {
                            this.metaTags += '<meta property="' + metaItem.property + '" content="' + metaItem.content + '"/>\n';
                        } else if (metaItem.script) {
                            var charset = metaItem.charset || 'utf-8';
                            var async = metaItem.async ? ' async=true' : '';
                            this.metaTags += '<script src="' + metaItem.script + '" charset="' + charset + '"' + async + '></script>\n';
                        } else if (metaItem.style) {
                            var type = metaItem.type || 'text/css';
                            var rel = 'stylesheet';
                            this.metaTags += '<link rel="' + rel + '" type="' + type + '" href="' + metaItem.style + '">\n';
                        } else if (metaItem.rel) {
                            // <link rel="icon" type="image/png" href="/assets/favicons/favicon-32x32.png" sizes="32x32"/>
                            var _rel = metaItem.rel ? 'rel="' + metaItem.rel + '" ' : '';
                            var _type = metaItem.type ? 'type="' + metaItem.type + '" ' : '';
                            var href = metaItem.href ? 'href="' + metaItem.href + '" ' : '';
                            var sizes = metaItem.sizes ? 'sizes="' + metaItem.sizes + '" ' : '';
                            this.metaTags += '<link ' + _rel + _type + href + sizes + '>\n';
                        } else if (metaItem.srcContents) {
                            this.metaTags += metaItem.srcContents + '\n';
                        }
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
        }
    }, {
        key: 'setupTitle',
        value: function setupTitle(vueObject) {
            if (vueObject && vueObject.head && vueObject.head.title) {
                this.title = '<title>' + vueObject.head.title + '</title>\n';
            } else {
                this.title = '';
            }
        }
    }, {
        key: 'setupStructuredData',
        value: function setupStructuredData(vueObject) {
            if (vueObject && vueObject.head && vueObject.head.structuredData) {
                this.structuredData = '<script type="application/ld+json">\n' + JSON.stringify(vueObject.head.structuredData) + '\n</script>\n';
            } else {
                this.structuredData = '';
            }
        }
    }, {
        key: 'setupStyleString',
        value: function setupStyleString(styleString) {
            if (styleString) {
                this.style = '<style>' + styleString + '</style>';
            } else {
                this.style = '';
            }
        }
    }, {
        key: 'toString',
        value: function toString() {
            return '<head>\n' + this.title + this.metaTags + this.structuredData + this.style + '</head>';
        }
    }]);

    return HeadUtil;
}();

module.exports = HeadUtil;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9oZWFkLmpzIl0sIm5hbWVzIjpbIkhlYWRVdGlsIiwidnVlT2JqZWN0Iiwic3R5bGVTdHJpbmciLCJzZXR1cFN0eWxlU3RyaW5nIiwic2V0dXBNZXRhVGFncyIsInNldHVwVGl0bGUiLCJzZXR1cFN0cnVjdHVyZWREYXRhIiwibWV0YVRhZ3MiLCJ1bmRlZmluZWQiLCJoZWFkIiwibWV0YSIsIm1ldGFJdGVtIiwibmFtZSIsImNvbnRlbnQiLCJwcm9wZXJ0eSIsInNjcmlwdCIsImNoYXJzZXQiLCJhc3luYyIsInN0eWxlIiwidHlwZSIsInJlbCIsImhyZWYiLCJzaXplcyIsInNyY0NvbnRlbnRzIiwidGl0bGUiLCJzdHJ1Y3R1cmVkRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7SUFDTUEsUTtBQUtGLHNCQUFZQyxTQUFaLEVBQXNDQyxXQUF0QyxFQUEyRDtBQUFBOztBQUN2RCxhQUFLQyxnQkFBTCxDQUFzQkQsV0FBdEI7QUFDQSxhQUFLRSxhQUFMLENBQW1CSCxTQUFuQjtBQUNBLGFBQUtJLFVBQUwsQ0FBZ0JKLFNBQWhCO0FBQ0EsYUFBS0ssbUJBQUwsQ0FBeUJMLFNBQXpCO0FBQ0g7Ozs7c0NBQ2FBLFMsRUFBbUI7QUFDN0IsZ0JBQUksS0FBS00sUUFBTCxLQUFrQkMsU0FBdEIsRUFBaUM7QUFDN0IscUJBQUtELFFBQUwsR0FBZ0IsRUFBaEI7QUFDSDtBQUNELGdCQUFJTixVQUFVUSxJQUFWLElBQWtCUixVQUFVUSxJQUFWLENBQWVDLElBQXJDLEVBQTJDO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQ3ZDLHlDQUFxQlQsVUFBVVEsSUFBVixDQUFlQyxJQUFwQyw4SEFBMEM7QUFBQSw0QkFBakNDLFFBQWlDOztBQUN0Qyw0QkFBSUEsU0FBU0MsSUFBYixFQUFtQjtBQUNmLGlDQUFLTCxRQUFMLHFCQUFnQ0ksU0FBU0MsSUFBekMsbUJBQTJERCxTQUFTRSxPQUFwRTtBQUNILHlCQUZELE1BRU8sSUFBSUYsU0FBU0csUUFBYixFQUF1QjtBQUMxQixpQ0FBS1AsUUFBTCx5QkFBb0NJLFNBQVNHLFFBQTdDLG1CQUFtRUgsU0FBU0UsT0FBNUU7QUFDSCx5QkFGTSxNQUVBLElBQUlGLFNBQVNJLE1BQWIsRUFBcUI7QUFDeEIsZ0NBQU1DLFVBQVVMLFNBQVNLLE9BQVQsSUFBb0IsT0FBcEM7QUFDQSxnQ0FBTUMsUUFBUU4sU0FBU00sS0FBVCxHQUFpQixhQUFqQixHQUFpQyxFQUEvQztBQUNBLGlDQUFLVixRQUFMLHNCQUFpQ0ksU0FBU0ksTUFBMUMsbUJBQThEQyxPQUE5RCxTQUF5RUMsS0FBekU7QUFDSCx5QkFKTSxNQUlBLElBQUlOLFNBQVNPLEtBQWIsRUFBb0I7QUFDdkIsZ0NBQU1DLE9BQU9SLFNBQVNRLElBQVQsSUFBaUIsVUFBOUI7QUFDQSxnQ0FBTUMsTUFBTSxZQUFaO0FBQ0EsaUNBQUtiLFFBQUwsb0JBQStCYSxHQUEvQixnQkFBNkNELElBQTdDLGdCQUE0RFIsU0FBU08sS0FBckU7QUFDSCx5QkFKTSxNQUlBLElBQUlQLFNBQVNTLEdBQWIsRUFBa0I7QUFDckI7QUFDQSxnQ0FBTUEsT0FBTVQsU0FBU1MsR0FBVCxhQUF1QlQsU0FBU1MsR0FBaEMsVUFBMEMsRUFBdEQ7QUFDQSxnQ0FBTUQsUUFBT1IsU0FBU1EsSUFBVCxjQUF5QlIsU0FBU1EsSUFBbEMsVUFBNkMsRUFBMUQ7QUFDQSxnQ0FBTUUsT0FBT1YsU0FBU1UsSUFBVCxjQUF5QlYsU0FBU1UsSUFBbEMsVUFBNkMsRUFBMUQ7QUFDQSxnQ0FBTUMsUUFBUVgsU0FBU1csS0FBVCxlQUEyQlgsU0FBU1csS0FBcEMsVUFBZ0QsRUFBOUQ7QUFDQSxpQ0FBS2YsUUFBTCxlQUEwQmEsSUFBMUIsR0FBZ0NELEtBQWhDLEdBQXVDRSxJQUF2QyxHQUE4Q0MsS0FBOUM7QUFDSCx5QkFQTSxNQU9BLElBQUlYLFNBQVNZLFdBQWIsRUFBMEI7QUFDN0IsaUNBQUtoQixRQUFMLElBQW9CSSxTQUFTWSxXQUE3QjtBQUNIO0FBQ0o7QUF4QnNDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF5QjFDO0FBQ0o7OzttQ0FDVXRCLFMsRUFBbUI7QUFDMUIsZ0JBQUlBLGFBQWFBLFVBQVVRLElBQXZCLElBQStCUixVQUFVUSxJQUFWLENBQWVlLEtBQWxELEVBQXlEO0FBQ3JELHFCQUFLQSxLQUFMLGVBQXVCdkIsVUFBVVEsSUFBVixDQUFlZSxLQUF0QztBQUNILGFBRkQsTUFFTztBQUNILHFCQUFLQSxLQUFMLEdBQWEsRUFBYjtBQUNIO0FBQ0o7Ozs0Q0FDbUJ2QixTLEVBQW1CO0FBQ25DLGdCQUFJQSxhQUFhQSxVQUFVUSxJQUF2QixJQUErQlIsVUFBVVEsSUFBVixDQUFlZ0IsY0FBbEQsRUFBa0U7QUFDOUQscUJBQUtBLGNBQUwsNkNBQThEQyxLQUFLQyxTQUFMLENBQWUxQixVQUFVUSxJQUFWLENBQWVnQixjQUE5QixDQUE5RDtBQUNILGFBRkQsTUFFTztBQUNILHFCQUFLQSxjQUFMLEdBQXNCLEVBQXRCO0FBQ0g7QUFDSjs7O3lDQUNnQnZCLFcsRUFBcUI7QUFDbEMsZ0JBQUlBLFdBQUosRUFBaUI7QUFDYixxQkFBS2dCLEtBQUwsZUFBdUJoQixXQUF2QjtBQUNILGFBRkQsTUFFTztBQUNILHFCQUFLZ0IsS0FBTCxHQUFhLEVBQWI7QUFDSDtBQUNKOzs7bUNBQ2tCO0FBQ2YsbUJBQU8sYUFBYSxLQUFLTSxLQUFsQixHQUEwQixLQUFLakIsUUFBL0IsR0FBMEMsS0FBS2tCLGNBQS9DLEdBQWdFLEtBQUtQLEtBQXJFLEdBQTZFLFNBQXBGO0FBQ0g7Ozs7OztBQUdMVSxPQUFPQyxPQUFQLEdBQWlCN0IsUUFBakIiLCJmaWxlIjoiaGVhZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5cbnR5cGUgVnVlT2JqZWN0VHlwZSA9IHtcbiAgICBoZWFkOiB7XG4gICAgICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgICAgIG1ldGE6IE9iamVjdFtdLFxuICAgICAgICBzdHJ1Y3R1cmVkRGF0YTogT2JqZWN0XG4gICAgfVxufVxuLy8gdnVlOiB7XG4vLyAgICAgaGVhZDoge1xuLy8gICAgICAgICB0aXRsZTogJ1BhZ2UgVGl0bGUnLFxuLy8gICAgICAgICBtZXRhOiBbXG4vLyAgICAgICAgICAgICB7IHByb3BlcnR5OidvZzp0aXRsZScsIGNvbnRlbnQ6ICdQYWdlIFRpdGxlJ30sXG4vLyAgICAgICAgICAgICB7IG5hbWU6J3R3aXR0ZXI6dGl0bGUnLCBjb250ZW50OiAnUGFnZSBUaXRsZSd9LFxuLy8gICAgICAgICBdXG4vLyAgICAgfVxuLy8gfVxuY2xhc3MgSGVhZFV0aWwge1xuICAgIG1ldGFUYWdzOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBzdHJ1Y3R1cmVkRGF0YTogc3RyaW5nO1xuICAgIHN0eWxlOiBzdHJpbmc7XG4gICAgY29uc3RydWN0b3IodnVlT2JqZWN0OiBWdWVPYmplY3RUeXBlLCBzdHlsZVN0cmluZzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2V0dXBTdHlsZVN0cmluZyhzdHlsZVN0cmluZyk7XG4gICAgICAgIHRoaXMuc2V0dXBNZXRhVGFncyh2dWVPYmplY3QpO1xuICAgICAgICB0aGlzLnNldHVwVGl0bGUodnVlT2JqZWN0KTtcbiAgICAgICAgdGhpcy5zZXR1cFN0cnVjdHVyZWREYXRhKHZ1ZU9iamVjdCk7XG4gICAgfVxuICAgIHNldHVwTWV0YVRhZ3ModnVlT2JqZWN0OiBPYmplY3QpIHtcbiAgICAgICAgaWYgKHRoaXMubWV0YVRhZ3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5tZXRhVGFncyA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2dWVPYmplY3QuaGVhZCAmJiB2dWVPYmplY3QuaGVhZC5tZXRhKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBtZXRhSXRlbSBvZiB2dWVPYmplY3QuaGVhZC5tZXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGFJdGVtLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhVGFncyArPSBgPG1ldGEgbmFtZT1cIiR7bWV0YUl0ZW0ubmFtZX1cIiBjb250ZW50PVwiJHttZXRhSXRlbS5jb250ZW50fVwiLz5cXG5gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWV0YUl0ZW0ucHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhVGFncyArPSBgPG1ldGEgcHJvcGVydHk9XCIke21ldGFJdGVtLnByb3BlcnR5fVwiIGNvbnRlbnQ9XCIke21ldGFJdGVtLmNvbnRlbnR9XCIvPlxcbmA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXRhSXRlbS5zY3JpcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhcnNldCA9IG1ldGFJdGVtLmNoYXJzZXQgfHwgJ3V0Zi04JztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXN5bmMgPSBtZXRhSXRlbS5hc3luYyA/ICcgYXN5bmM9dHJ1ZScgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhVGFncyArPSBgPHNjcmlwdCBzcmM9XCIke21ldGFJdGVtLnNjcmlwdH1cIiBjaGFyc2V0PVwiJHtjaGFyc2V0fVwiJHthc3luY30+PC9zY3JpcHQ+XFxuYDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGFJdGVtLnN0eWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBtZXRhSXRlbS50eXBlIHx8ICd0ZXh0L2Nzcyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhVGFncyArPSBgPGxpbmsgcmVsPVwiJHtyZWx9XCIgdHlwZT1cIiR7dHlwZX1cIiBocmVmPVwiJHttZXRhSXRlbS5zdHlsZX1cIj5cXG5gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWV0YUl0ZW0ucmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIDxsaW5rIHJlbD1cImljb25cIiB0eXBlPVwiaW1hZ2UvcG5nXCIgaHJlZj1cIi9hc3NldHMvZmF2aWNvbnMvZmF2aWNvbi0zMngzMi5wbmdcIiBzaXplcz1cIjMyeDMyXCIvPlxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWwgPSBtZXRhSXRlbS5yZWwgPyBgcmVsPVwiJHttZXRhSXRlbS5yZWx9XCIgYCA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gbWV0YUl0ZW0udHlwZSA/IGB0eXBlPVwiJHttZXRhSXRlbS50eXBlfVwiIGAgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaHJlZiA9IG1ldGFJdGVtLmhyZWYgPyBgaHJlZj1cIiR7bWV0YUl0ZW0uaHJlZn1cIiBgIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpemVzID0gbWV0YUl0ZW0uc2l6ZXMgPyBgc2l6ZXM9XCIke21ldGFJdGVtLnNpemVzfVwiIGAgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhVGFncyArPSBgPGxpbmsgJHtyZWx9JHt0eXBlfSR7aHJlZn0ke3NpemVzfT5cXG5gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWV0YUl0ZW0uc3JjQ29udGVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhVGFncyArPSBgJHttZXRhSXRlbS5zcmNDb250ZW50c31cXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXR1cFRpdGxlKHZ1ZU9iamVjdDogT2JqZWN0KSB7XG4gICAgICAgIGlmICh2dWVPYmplY3QgJiYgdnVlT2JqZWN0LmhlYWQgJiYgdnVlT2JqZWN0LmhlYWQudGl0bGUpIHtcbiAgICAgICAgICAgIHRoaXMudGl0bGUgPSBgPHRpdGxlPiR7dnVlT2JqZWN0LmhlYWQudGl0bGV9PC90aXRsZT5cXG5gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50aXRsZSA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldHVwU3RydWN0dXJlZERhdGEodnVlT2JqZWN0OiBPYmplY3QpIHtcbiAgICAgICAgaWYgKHZ1ZU9iamVjdCAmJiB2dWVPYmplY3QuaGVhZCAmJiB2dWVPYmplY3QuaGVhZC5zdHJ1Y3R1cmVkRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5zdHJ1Y3R1cmVkRGF0YSA9IGA8c2NyaXB0IHR5cGU9XCJhcHBsaWNhdGlvbi9sZCtqc29uXCI+XFxuJHtKU09OLnN0cmluZ2lmeSh2dWVPYmplY3QuaGVhZC5zdHJ1Y3R1cmVkRGF0YSl9XFxuPC9zY3JpcHQ+XFxuYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RydWN0dXJlZERhdGEgPSAnJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXR1cFN0eWxlU3RyaW5nKHN0eWxlU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHN0eWxlU3RyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlID0gYDxzdHlsZT4ke3N0eWxlU3RyaW5nfTwvc3R5bGU+YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUgPSAnJztcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gJzxoZWFkPlxcbicgKyB0aGlzLnRpdGxlICsgdGhpcy5tZXRhVGFncyArIHRoaXMuc3RydWN0dXJlZERhdGEgKyB0aGlzLnN0eWxlICsgJzwvaGVhZD4nO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBIZWFkVXRpbDtcbiJdfQ==